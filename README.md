# NestMicroserviceKafka

<a href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

## Kafka Installation
✨You can check out this guide for setting up [Kafka locally.](https://blog.logrocket.com/building-rust-microservices-apache-kafka/#getting-started-kafka) ✨

## Nx installation
[Nx](https://nx.dev/) is a popular tool for managing monorepos
The CLI must be installed to quickly create mono repos.
```sudo npm i -g @nrwl/cli```

#### Creation of the first project and base structure

```npx create-nx-workspace@latest```

## Nest JS Installation (Kafka,microservices)
Installing required npm packages for Nest JS
```npm i @nestjs/microservices kafkajs class-validator class-transformer```


### Create a shared library by running the following command:
With this shared lib We can keep entity, enum objects and dto objects

``` nx g @nrwl/node:lib shared ```

###  Creating the api-gateway microservice
```nx g @nrwl/nest:app api-gateway ```

###  Creating first user microservice
```nx g @nrwl/nest:app user-microservice ```
##### User micro servisindeki main.ts'e aşağıdaki kod bloğu eklenmelidir.
// apps/user-microservice/src/main.ts
 ```
  async function bootstrap() {
  const app = await NestFactory.createMicroservice<MicroserviceOptions>(
    AppModule,
    {
      transport: Transport.KAFKA,
      options: {
        client: {
          brokers: ['localhost:9092'],
        },
        consumer: {
          groupId: 'user-consumer',
        },
      },
    }
  );
  await app.listen();
}```
